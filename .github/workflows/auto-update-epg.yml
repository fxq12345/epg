- name: 提交更新到仓库
  run: |
    git config --global user.name "GitHub Actions"
    git config --global user.email "actions@github.com"
    git add output/epg.xml output/epg.gz epg_merge.log weifang_epg.xml
    git diff --quiet && git diff --staged --quiet || git commit -m "自动更新EPG数据（$(date +'%Y-%m-%d %H:%M:%S')）"
    git push origin master --force-with-lease  # 安全强制覆盖，避免冲突
